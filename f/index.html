<!DOCTYPE html>
<html>
<head>
  <link rel="icon" href="data:;base64,iVBORw0KGgo=">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=2" />
</head>
<body style="text-size-adjust:100%;">
<div id="text">
<pre>
■授業名:FMS特別講義
■日時:2020/10/08
■講義名:テセレーションデザインとは
</pre>
<pre style="background-color:#ffffaa;" contenteditable="true">
■学籍番号:
■氏名:
</pre>
<pre>
--------------------------------
■課題1: しきつめハートの作品 (2点以上)
</pre>
<pre id="heart" style="background-color:#ffffaa;" contenteditable="true">
</pre>
<script>
document.querySelector('pre#heart').innerHTML = getHtml('heart','#しきつめハート');
function getHtml(key,hash) {
  let ret = [];
  let tweet = localStorage.getItem(key+'Tweet');
  if (tweet && tweet.trim().length>0) {
    let value = `${hash} #{tweet}`;
    let url = 'https://twitter.com/search?q='+encodeURIComponent(value);
    ret.push(url);
  }
  let view = localStorage.getItem(key+'View');
  if (view && view.trim().length>-0) {
    let viewIds = view.split(',');
    for (let vi=0;vi<viewIds.length;vi++) {
      let filedId = viewIds[vi];
      ret.push(`https://drive.google.com/file/d/${fileId}/view`);
    }
  }
  if (ret.length) {
    return ret.join('\n');
  } else {
    return '<< Oh-o!Meijiに画像を２点添付します >>';
  }
}
</script>
<pre>
--------------------------------
■課題2: T3パズル作品 (2点以上)
</pre>
<pre id="t3" style="background-color:#ffffaa;" contenteditable="true">
</pre>
<script>
document.querySelector('pre#t3').innerHTML = getHtml('t3','#T3パズル');
</script>
<pre>
--------------------------------
■課題3: コンテストの企画
</pre>
<pre id="t3" style="background-color:#ffffaa;" contenteditable="true">
・コンテスト名称:
・社会情勢やトレンド:

・想定する応募者:

・コンテストを通して応募者に向き合ってほしいこと:

・実施手段と実現性に向けた考察:




</pre>
<pre>
■お知らせ
T3GoToコンテストのお知らせ
11月に応募を開始予定です。
http://twitter.com/t3puzzle をフォローするか

</pre>

</div>
<button id="copy">Copy</button>
<script>
let ua = navigator.userAgent;
let copy = document.querySelector('button#copy');
let copyText = document.querySelector('div#text');
copy.addEventListener('click',e=>{
  if (/(iPhone|iPad|Android)/i.test(ua)) {
    let range = document.createRange();
    range.selectNode(copyText);
    window.getSelection().addRange(range);
  } else {
    document.getSelection().selectAllChildren(copyText);
  }
  return document.execCommand('copy');
});
if (!/(iPhone|iPad|Android|Edge)/i.test(ua)) {
  document.currentScript.insertAdjacentHTML('afterend',`
<a download="report${getDateStr()}.txt"
   href="data:text/plain;charset=UTF-8,${encodeURIComponent(copyText.innerText)}">Download</a>
`);
}
function getDateStr() {
  let date = new Date();
  let millisec = date.getMilliseconds();
  if (millisec<10) {
    millisec = '00'+millisec;
  } else if (millisec<100) {
    millisec = '0'+millisec;
  }
  let options = { year: 'numeric', month: '2-digit', day: '2-digit', hour:'2-digit', minute:'2-digit', second:'2-digit'};
  return date.toLocaleString('ja-JP',options).replace(/(\/|:)/g,'').replace(/ /g,'_')+'_'+millisec;
}
</script>
</body>
</html>
